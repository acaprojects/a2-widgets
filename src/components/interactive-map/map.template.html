
<div [class]="'map ' + id" widget>
    <div class="map-container" [class.focus-lock]="focus?.lock"
        map-input [(scale)]="zoom" (scaleChange)="update()" [(center)]="center" (centerChange)="update()" (event)="userEvent($event)">
        <div #map class="map-area"
            [style.transform]="state.transform | safestyle"
            [style.width]="(100 * state.scale) + '%'"
            [style.height]="(100 * state.scale) + '%'"
            [style.display]="state.loading ? 'none' : ''">
            <div #img class="map-img" [innerHTML]="(state.map || '') | safe"></div>
            <map-overlay-container [model]="interest_points" [el]="map" [state]="{ center: center, scale: (100 + zoom) / 100, ratio: map_ratio }" (event)="overlayEvent($event)" [resize]="zoom"></map-overlay-container>
        </div>
        <div class="no-map" *ngIf="!state.map&&!state.loading">No map loaded!</div>
        <div class="loading-spinner" *ngIf="state.loading">
            <div class="icon"></div>
        </div>
    </div>
</div>
